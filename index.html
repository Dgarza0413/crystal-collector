<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Crystal Collector</title>
</head>

<style>
    button {
        height: 100px;
        width: 100px;
        margin: 30px;
        padding: 30px;
        background-color: grey;
    }

    .hud {
        margin: 30px;
        padding: 30px;
        background-color: grey;
        text-align: center;
    }

    .crystal-box {
        width: 100px;
        height: 100px;
        margin: 30px;
        padding: 30px;
        background-color: grey;
    }

    .flex-container {
        display: flex;
        justify-content: center;
    }

    #box-display {
        display: flex;
        flex-direction: row;
        justify-content: center;
    }
</style>

<body>
    <div class="hud">Message: <span id="msg-display"></span></div>
    <div class="flex-container">
        <div class="hud">
            <h3>Wins</h3><span id="win-score-display"></span>
        </div>
        <div class="hud">
            <h3>Lose</h3><span id="lose-score-display"></span>
        </div>
    </div>

    <div class="flex-container">
        <div class="hud">
            <h3>Goal Score</h3><span id="goal-score-display"></span>
        </div>
        <div class="hud">
            <h3>User Score</h3><span id="user-score-display"></span>
        </div>
    </div>

    <div id="box-display">
        <button><img src="" alt=""></button>
        <button><img src="" alt=""></button>
        <button><img src="" alt=""></button>
        <button><img src="" alt=""></button>
    </div>
    <div onclick="gameReset()">reset</div>

</body>


<script>
    //four boxes will use on click functions to contribute their assignmed values
    //the four boxes will be generated via for loops

    //initial scores
    var userScore = 0;
    var goalScore = (Math.floor(Math.random() * 100) + 29)
    //win loss counters
    var winScore = 0;
    var loseScore = 0;


    //if function to check win or lose
    function gameReset() {
        userScore = 0
        goalScore = (Math.floor(Math.random() * 100) + 29);
        $("#goal-score-display").text(goalScore)
        $("#user-score-display").text(userScore)
    }

    function gameEnd() {
        if (userScore === (goalScore)) {
            console.log("you win")
            $("#win-score-display").text(++winScore)
            $("#msg-display").text("YOU WIN")
            return gameReset()
        } else if ((userScore > goalScore)) {
            $("#lose-score-display").text(++winScore)
            $("#msg-display").text("YOU LOSE")
            console.log("you lose")
            return gameReset()
        }
    }
    // using for each to set a random number on all buttons
    // using this routing is better for setting unique img for the buttons
    $("button").each(function () {
        var crystalNumber = (Math.floor(Math.random() * 12) + 1);
        //use keyword this to refer to the object of button
        $(this).attr("random-value", crystalNumber)
        $(this).text(crystalNumber)
        console.log("random-value")
    })

    $("#goal-score-display").text(goalScore)

    //this on click will use the button's number to update the userScore
    //click checks if game has won or loss
    $("button").on("click", function () {
        var randomvalue = parseInt($(this).attr("random-value"))
        //does it meet the conditions?
        userScore = Number(userScore) + Number(randomvalue)
        $("#user-score-display").text(userScore)
        //after
        gameEnd()
    })

    //for loop to generate four boxes with populated randomnumbers
    // for (var i = 0; i < 4; i++) {
    //     var goalScore = (Math.floor(Math.random() * 10) + 1)
    //     var randomNumber = (Math.floor(Math.random() * 10) + 1);
    //     // crystalbox = $("<div>");
    //     $("button").text(Math)
    //     crystalbox.addClass("crystal-box")
    //     crystalbox.attr("random-number", randomNumber)
    //     crystalbox.text(randomNumber);
    //     $("#box-display").append(crystalbox)
    // }


    //on click function to add crystal box random number to sumCounter
    //add to userscore when clicked
    //need to treat userScore like a number
    //concatenates them instead
    //use parseInt??
    // $(".crystal-box").on("click", function () {
    //     // var userScore = $("#user-score-display").val();
    //     // var crystalNumber = $(".crystal-box").val();
    //     // var total = parseInt(userScore) + parseInt(crystalNumber)
    //     var userNumber = parseInt(userScore.val(), 0)
    //     gameEnd()
    //     $("#user-score-display").text(userNumber += $(this).attr("random-number"));
    //     console.log("user score: " + userScore)
    // })
</script>

</html>